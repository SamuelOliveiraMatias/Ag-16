const cards = document.querySelectorAll(".card"), motionMatchMedia = window.matchMedia("(prefers-reduced-motion)"), THRESHOLD = 15; function handleHover(e) { const { clientX: t, clientY: r, currentTarget: n } = e, { clientWidth: o, clientHeight: c } = n, d = n.getBoundingClientRect().left, i = (r - n.getBoundingClientRect().top) / c, a = (7.5 - 15 * ((t - d) / o)).toFixed(2), s = (15 * i - 7.5).toFixed(2); n.style.transform = `perspective(${o}px) rotateX(${s}deg) rotateY(${a}deg) scale3d(1, 1, 1)` } function resetStyles(e) { e.currentTarget.style.transform = `perspective(${e.currentTarget.clientWidth}px) rotateX(0deg) rotateY(0deg)` } motionMatchMedia.matches || cards.forEach((e => { e.addEventListener("mousemove", handleHover), e.addEventListener("mouseleave", resetStyles) }));